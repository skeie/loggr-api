{"version":3,"sources":["../../server/users/userDAO.js"],"names":["Dao","db","dao","getUser","any","email","then","data","catch","error","createUser","one","user","name","url","id","console","log","message","require","CommonDao","commonDao","module","exports"],"mappings":";;;;IAAMA,G,GACJ,aAAYC,EAAZ,EAAgBC,GAAhB,EAAqB;AAAA;;AAAA;;AAAA,OAMrBC,OANqB,GAMX,iBAAS;AACjB,WAAO,MAAKF,EAAL,CAAQG,GAAR,CAAY,yDAAZ,EAAuE,CAACC,KAAD,CAAvE,EACNC,IADM,CACD,UAAUC,IAAV,EAAgB;AAClB,aAAOA,KAAK,CAAL,CAAP,CADkB,CACF;AACnB,KAHM,EAINC,KAJM,CAIA,UAAUC,KAAV,EAAiB;AACrB,aAAO,KAAP;AACF,KANM,CAAP;AAOD,GAdoB;;AAAA,OAgBrBC,UAhBqB,GAgBR,gBAAQ;AACnB,WAAO,MAAKT,EAAL,CACJU,GADI,CACA,uEADA,EACyE,CAC5EC,KAAKC,IADuE,EAE5ED,KAAKE,GAFuE,EAG5EF,KAAKP,KAHuE,CADzE,EAMJC,IANI,CAMC,gBAAe;AAAA,UAALS,EAAK,QAALA,EAAK;;AACnB,aAAOA,EAAP;AAED,KATI,EAUJP,KAVI,CAUE,UAASC,KAAT,EAAgB;AACrBO,cAAQC,GAAR,CAAY,QAAZ,EAAsBR,MAAMS,OAAN,IAAiBT,KAAvC,EADqB,CAC0B;AAChD,KAZI,CAAP;AAaD,GA9BoB;;AACnB,OAAKR,EAAL,GAAUA,MAAMkB,QAAQ,qBAAR,EAA+BlB,EAA/C;AACA,MAAMmB,YAAYlB,OAAOiB,QAAQ,eAAR,CAAzB;AACA,OAAKE,SAAL,GAAiB,IAAID,SAAJ,EAAjB;AACD,C;;AA6BHE,OAAOC,OAAP,GAAiBvB,GAAjB","file":"userDAO.js","sourcesContent":["class Dao {\n  constructor(db, dao) {\n    this.db = db || require(\"../lib/dbConnection\").db;\n    const CommonDao = dao || require(\"../common/dao\");\n    this.commonDao = new CommonDao();\n  }\n\n  getUser = email => {\n    return this.db.any(\"select id, name, image, email from users where email=$1\", [email])\n    .then(function (data) {\n        return data[0]; //assume there is only one\n    })\n    .catch(function (error) {\n       return false; \n    });\n  }\n\n  createUser = user => {\n    return this.db\n      .one(\"insert into users(name, image, email) values($1, $2, $3) returning id\", [\n        user.name,\n        user.url,\n        user.email\n      ])\n      .then(function({id}) {\n        return id;\n        \n      })\n      .catch(function(error) {\n        console.log(\"ERROR:\", error.message || error); // print error;\n      });\n  };\n}\n\nmodule.exports = Dao;\n"]}