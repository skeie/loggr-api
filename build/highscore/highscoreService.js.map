{"version":3,"sources":["../../server/highscore/highscoreService.js"],"names":["Service","dao","commonDao","update","userId","amount","getOne","id","getAll","Promise","all","get","then","highscore","userHighScore","resolve","create","isOldUser","HighscoreDao","require","CommonDao","ExerciseDao","exerciseDao","module","exports"],"mappings":";;;;;;IAAMA,O,GACF,iBAAYC,GAAZ,EAAiBC,SAAjB,EAA4B;AAAA;;AAAA;;AAAA,SAS5BC,MAT4B,GASnB,UAACC,MAAD,EAASC,MAAT,EAAoB;AACzB,eAAO,MAAKJ,GAAL,CAASK,MAAT,CAAgBC,EAAhB,CAAP;AACH,KAX2B;;AAAA,SAa5BC,MAb4B,GAanB,kBAAU;AACf,eAAOC,QAAQC,GAAR,CAAY,CAAC,MAAKT,GAAL,CAASO,MAAT,EAAD,EAAoB,MAAKP,GAAL,CAASU,GAAT,CAAaP,MAAb,CAApB,CAAZ,EACFQ,IADE,CACG;AAAA;AAAA,gBAAEC,SAAF;AAAA,gBAAaC,aAAb;;AAAA,mBACFL,QAAQM,OAAR,CAAgB,EAAEF,oBAAF,EAAaC,4BAAb,EAAhB,CADE;AAAA,SADH,CAAP;AAGH,KAjB2B;;AAAA,SAmB5BE,MAnB4B,GAmBnB,UAACZ,MAAD,EAASa,SAAT,EAAuB;AAC5B;AACA,eAAO,MAAKhB,GAAL,CAASe,MAAT,CAAgBZ,MAAhB,EAAwB,CAAxB,CAAP;AACH,KAtB2B;;AACxB,QAAMc,eAAejB,OAAOkB,QAAQ,gBAAR,CAA5B;AACA,QAAMC,YAAYlB,aAAaiB,QAAQ,eAAR,CAA/B;AACA,QAAME,cAAcF,QAAQ,2BAAR,CAApB;AACA,SAAKG,WAAL,GAAmB,IAAID,WAAJ,EAAnB;AACA,SAAKpB,GAAL,GAAW,IAAIiB,YAAJ,EAAX;AACA,SAAKhB,SAAL,GAAiB,IAAIkB,SAAJ,EAAjB;AACH,C;;AAkBLG,OAAOC,OAAP,GAAiBxB,OAAjB","file":"highscoreService.js","sourcesContent":["class Service {\n    constructor(dao, commonDao) {\n        const HighscoreDao = dao || require('./highscoreDao');\n        const CommonDao = commonDao || require('../common/dao');\n        const ExerciseDao = require('../exercises/exercisesDao');\n        this.exerciseDao = new ExerciseDao();\n        this.dao = new HighscoreDao();\n        this.commonDao = new CommonDao();\n    }\n\n    update = (userId, amount) => {\n        return this.dao.getOne(id);\n    };\n\n    getAll = userId => {\n        return Promise.all([this.dao.getAll(), this.dao.get(userId)])\n            .then(([highscore, userHighScore]) => \n                Promise.resolve({ highscore, userHighScore }));\n    };\n\n    create = (userId, isOldUser) => {\n        // generate highscore based on exercises\n        return this.dao.create(userId, 0);\n    };\n}\n\nmodule.exports = Service;\n"]}