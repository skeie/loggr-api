{"version":3,"sources":["../../server/highscore/highscoreRouter.js"],"names":["router","Router","service","requireToken","getAll","req","res","next","errors","validate","send","user","id","then","json","data","catch","sendStatus","get","param","validationErrors","console","log","what","error","JSON","stringify","module","exports"],"mappings":";;;;AAAA;;;;AAEA;;;;AAEA;;AAEA;;;;;;AALA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEA,IAAMC,UAAU,gCAAhB;;AAEA,IAAMC,eAAe,4BAArB;;;AAGA,IAAMC,SAAS,SAATA,MAAS,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjC,MAAMC,SAASC,SAAS,MAAT,EAAiBJ,GAAjB,CAAf;AACA,MAAI,CAAC,uBAAQG,MAAR,CAAL,EAAsB;AACpBF,QAAII,IAAJ,CAAS,GAAT,EAAcF,MAAd;AACD;;AAEDN,UACGE,MADH,CACUC,IAAIM,IAAJ,CAASC,EADnB,EAEGC,IAFH,CAEQ,gBAAQ;AACZP,QAAIQ,IAAJ,CAASC,IAAT;AACD,GAJH,EAKGC,KALH,CAKS,YAAM;AACXV,QAAIW,UAAJ,CAAe,GAAf;AACD,GAPH;AAQD,CAdD;;AAgBAjB,OAAOkB,GAAP,CAAW,GAAX,EAAgBf,YAAhB,EAA8BC,MAA9B;;AAEA,SAASK,QAAT,CAAkBU,KAAlB,EAAyBd,GAAzB,EAA8B;AAC5B,MAAMG,SAASH,IAAIe,gBAAJ,EAAf;;AAEA,MAAIZ,MAAJ,EAAY;AACVa,YAAQC,GAAR,CAAY,EAAEC,MAAMJ,KAAR,EAAeK,OAAOC,KAAKC,SAAL,CAAelB,MAAf,CAAtB,EAAZ;AACA,wBAAYA,MAAZ;AACD,GAHD,MAGO;AACL,WAAO,EAAP;AACD;AACF;;AAEDmB,OAAOC,OAAP,GAAiB5B,MAAjB","file":"highscoreRouter.js","sourcesContent":["import express from \"express\";\nconst router = express.Router();\nimport Service from \"./highscoreService\";\nconst service = new Service();\nimport { requireAuth } from \"../util/jwtToken\";\nconst requireToken = requireAuth();\nimport isEmpty from 'lodash/isEmpty';\n\nconst getAll = (req, res, next) => {\n  const errors = validate(\"user\", req);\n  if (!isEmpty(errors)) {\n    res.send(400, errors);\n  }\n  \n  service\n    .getAll(req.user.id)\n    .then(data => {\n      res.json(data);\n    })\n    .catch(() => {\n      res.sendStatus(400);\n    });\n};\n\nrouter.get(\"/\", requireToken, getAll);\n\nfunction validate(param, req) {\n  const errors = req.validationErrors();\n\n  if (errors) {\n    console.log({ what: param, error: JSON.stringify(errors) });\n    return { ...errors };\n  } else {\n    return {};\n  }\n}\n\nmodule.exports = router;\n"]}