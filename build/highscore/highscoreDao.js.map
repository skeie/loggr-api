{"version":3,"sources":["../../server/highscore/highscoreDao.js"],"names":["Dao","db","dao","get","query","userId","then","data","catch","error","create","highscore","console","log","one","id","message","require","CommonDao","commonDao","module","exports"],"mappings":";;;;IAAMA,G,GACJ,aAAYC,EAAZ,EAAgBC,GAAhB,EAAqB;AAAA;;AAAA;;AAAA,OAMrBC,GANqB,GAMf,kBAAU;AACd,WAAO,MAAKF,EAAL,CACJG,KADI,0DAGyCC;AAC5C;AAJG,MAMJC,IANI,CAMC;AAAA,aAAQC,IAAR;AAAA,KAND,EAOJC,KAPI,CAOE,iBAAS;AACd,aAAOC,KAAP;AACD,KATI,CAAP;AAUD,GAjBoB;;AAAA,OAmBrBC,MAnBqB,GAmBZ,UAACL,MAAD,EAASM,SAAT,EAAuB;AAC9BC,YAAQC,GAAR,CAAYF,SAAZ;AACA,WAAO,MAAKV,EAAL,CACJa,GADI,CACA,uEADA,EACyE,CAACT,MAAD,EAASM,SAAT,CADzE,EAEJL,IAFI,CAEC,gBAAiB;AAAA,UAANS,EAAM,QAANA,EAAM;;AACrB,aAAOA,EAAP;AACD,KAJI,EAKJP,KALI,CAKE,UAASC,KAAT,EAAgB;AACrBG,cAAQC,GAAR,CAAY,QAAZ,EAAsBJ,MAAMO,OAAN,IAAiBP,KAAvC,EADqB,CAC0B;AAChD,KAPI,CAAP;AAQD,GA7BoB;;AACnB,OAAKR,EAAL,GAAUA,MAAMgB,QAAQ,qBAAR,EAA+BhB,EAA/C;AACA,MAAMiB,YAAYhB,OAAOe,QAAQ,eAAR,CAAzB;AACA,OAAKE,SAAL,GAAiB,IAAID,SAAJ,EAAjB;AACD,C;;AA4BHE,OAAOC,OAAP,GAAiBrB,GAAjB","file":"highscoreDao.js","sourcesContent":["class Dao {\n  constructor(db, dao) {\n    this.db = db || require(\"../lib/dbConnection\").db;\n    const CommonDao = dao || require(\"../common/dao\");\n    this.commonDao = new CommonDao();\n  }\n\n  get = userId => {\n    return this.db\n      .query(\n        `\n      SELECT index from highscore where user_id = ${userId}`\n        // need to order by elements.id to have the right sequence in grid\n      )\n      .then(data => data)\n      .catch(error => {\n        return error;\n      });\n  };\n\n  create = (userId, highscore) => {\n    console.log(highscore)\n    return this.db\n      .one(\"insert into highscore(user_id, highscore) values($1, $2) returning id\", [userId, highscore])\n      .then(function({ id }) {\n        return id;\n      })\n      .catch(function(error) {\n        console.log(\"ERROR:\", error.message || error); // print error;\n      });\n  };\n}\n\nmodule.exports = Dao;\n"]}